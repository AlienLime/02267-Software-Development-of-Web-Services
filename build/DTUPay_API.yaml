swagger: '2.0'
info:
  version: v0.1
  title: DTU Pay
schemes:
  - http
  
paths:
  /customers:
    post:
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/RegisterCustomerBody'
      responses:
        '201':
          description: Registered
          headers:
            Location:
              type: string
      # No bad responses?
  
  # not customers/{id}/tokens?
  /customers/tokens:
    post:
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/RequestTokensBody'
      responses:
        '201':
          description: Registered
          headers:
            Location:
              type: string
        '400':
          description: Bad Request
          headers: {}
          schema:
            $ref: '#/definitions/ErrorType'
        '404':
            description: Not Found # should we specify meaning?
            headers: {}
            schema:
              $ref: '#/definitions/ErrorType'

  /merchants:
    post:
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/RegisterMerchantBody'
      responses:
        '201':
          description: Registered
          headers:
            Location:
              type: string
        # No bad responses?
  
  /merchants/payment:
    post:
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/Payment'
      responses:
        '201':
          description: Successful Payment
          headers: {}
        '400':
          description: Bad Request
          headers: {}
          schema:
            $ref: '#/definitions/ErrorType'
        '404':
          description: Not Found
          headers: {}
          schema:
            $ref: '#/definitions/ErrorType'

definitions:
  
  RequestTokensBody:
    properties:
      customerId:
        type: string
      amount:
        type: integer
        
  RegisterMerchantBody:
    properties:
      merchant:
        $ref: '#/definitions/Merchant'
      accountId:
        type: string
  
  RegisterCustomerBody:
    properties:
      customer:
        $ref: '#/definitions/Customer'
      accountId:
        type: string
  
  Payment:
    properties:
    #  id:
    #    type: string
      token:
        type: string
      amount:
        type: integer
      merchantId:
        type: string
  
  Merchant:
    properties:
      id:
        type: string
      firstName:
        type: string
      lastName:
        type: string
      cpr:
        type: string
  
  Customer:
    properties:
      id:
        type: string
      firstName:
        type: string
      lastName:
        type: string
      cpr:
        type: string
        
  ErrorType:
    properties:
      errorMessage:
        type: string
